<!DOCTYPE html>
<html style="font-size: 16px;" lang="en"><head>
<head>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta charset="utf-8">
    <meta name="keywords" content="School DB - Login">
    <meta name="description" content="">
    <title>Home</title>
    <link rel="stylesheet" href="/static/nicepage.css" media="screen">
<link rel="stylesheet" href="/static/Home.css" media="screen">
    <script class="u-script" type="text/javascript" src="/static/jquery.js" defer=""></script>
    <script class="u-script" type="text/javascript" src="/static/nicepage.js" defer=""></script>
    <meta name="generator" content="Nicepage 5.2.0, nicepage.com">
    <meta name="referrer" content="origin">
    <link id="u-theme-google-font" rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:100,100i,300,300i,400,400i,500,500i,700,700i,900,900i|Open+Sans:300,300i,400,400i,500,500i,600,600i,700,700i,800,800i">
    <link id="u-page-google-font" rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto+Slab:100,200,300,400,500,600,700,800,900">
    <script type="application/ld+json">{
      "@context": "http://schema.org",
      "@type": "Organization",
      "name": "SchoolDB"
  }</script>
      <meta name="theme-color" content="#478ac9">
      <meta property="og:title" content="Home">
      <meta property="og:type" content="website">
</head>
<body class="u-body u-xl-mode" data-lang="en">
  <section class="u-clearfix u-gradient u-section-1" id="sec-fb60">
    <div class="u-clearfix u-sheet u-sheet-1">
      <h1 class="u-custom-font u-font-roboto-slab u-text u-text-default u-text-1">School DB - Login</h1>
      <div class="u-form u-form-1">
        <form id="login-form"  class="u-clearfix u-form-spacing-20 u-form-vertical u-inner-form" style="padding: 10px" source="email" name="form">
          <div class="u-form-group u-form-name u-label-none">
            <label for="name-3b9a" class="u-label">Name</label>
            <input type="text" placeholder="Username" id="username" name="text" class="u-border-2 u-border-black u-border-no-left u-border-no-right u-border-no-top u-custom-font u-font-roboto-slab u-input u-input-rectangle u-input-1" required="">
          </div>
          <div class="u-form-email u-form-group u-label-none">
            <label for="email-3b9a" class="u-label">Email</label>
            <input placeholder="Password" id="password" name="password" class="u-border-2 u-border-black u-border-no-left u-border-no-right u-border-no-top u-custom-font u-font-roboto-slab u-input u-input-rectangle u-input-2" required="required" type="password">
          </div>
          <div class="u-align-center u-form-group u-form-submit">
            <a href="#" class="u-border-2 u-border-black u-btn u-btn-rectangle u-btn-submit u-button-style u-none u-btn-1">Submit</a>
            <input type="submit" value="submit" class="u-form-control-hidden">
          </div>
        </form>
      </div>
    </div>
  </section>
  <script>

    // Get the login form element
    const loginForm = document.querySelector('#login-form');
  
    // Add an event listener to the form that listens for a "submit" event
    loginForm.addEventListener('submit', (event) => {
      // Prevent the default action of the form (submitting the data to the server)
      event.preventDefault();
  
      // Get the values of the input elements
      const username = loginForm.elements.username.value;
      const password = loginForm.elements.password.value;

      // Make an HTTP POST request to the Flask app
    const xhr = new XMLHttpRequest();
    xhr.open('POST', '/route');
    xhr.setRequestHeader('Content-Type', 'application/json');
    xhr.onload = () => {
        if (xhr.status === 200) {
            const response = JSON.parse(xhr.response);
            if(response['login_success']) {
                setTimeout(function() {
                    window.location.replace(window.location.href + "dashboard");
                }, 1000);
                console.log('200');
            } else {
                alert('Login Invalid!')
            }
        } else {
            console.error('404');
        }
    };
    xhr.send(JSON.stringify({method: "login",username: username, password: password}));
    });

    
  </script>
</body>
</html>
